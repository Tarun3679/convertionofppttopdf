### Docling Serve API - REST Client for VS Code
### Install "REST Client" extension by Huachao Mao to use this file
### Documentation: https://github.com/docling-project/docling-serve

@baseUrl = http://localhost:5001

###############################################################################
# Health Check
###############################################################################

### Check if server is running
GET {{baseUrl}}/health

### Get OpenAPI documentation
GET {{baseUrl}}/openapi.json

###############################################################################
# Convert via URL - Simple (no options)
###############################################################################

### Convert PDF from URL to Markdown (default settings)
POST {{baseUrl}}/v1/convert/source
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ]
}

###############################################################################
# Convert via URL - With Options
###############################################################################

### Convert PDF from URL to Markdown (no OCR)
POST {{baseUrl}}/v1/convert/source
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ],
  "options": {
    "to_formats": ["md"],
    "do_ocr": false
  }
}

### Convert PDF from URL to JSON (no OCR)
POST {{baseUrl}}/v1/convert/source
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ],
  "options": {
    "to_formats": ["json"],
    "do_ocr": false
  }
}

### Convert with OCR enabled
POST {{baseUrl}}/v1/convert/source
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ],
  "options": {
    "to_formats": ["md"],
    "do_ocr": true,
    "ocr_engine": "easyocr",
    "ocr_lang": ["en"]
  }
}

### Convert with all options specified
POST {{baseUrl}}/v1/convert/source
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ],
  "options": {
    "to_formats": ["md"],
    "do_ocr": false,
    "table_mode": "fast",
    "image_export_mode": "placeholder",
    "abort_on_error": false
  }
}

###############################################################################
# Convert Local File (multipart/form-data)
# Options passed as query parameters
###############################################################################

### Convert local PDF to Markdown
# @name convertPdfToMd
POST {{baseUrl}}/v1/convert/file?to_formats=md&do_ocr=false
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="files"; filename="document.pdf"
Content-Type: application/pdf

< ./samples/sample.pdf
------WebKitFormBoundary--

### Convert local PPTX to Markdown
# @name convertPptxToMd
POST {{baseUrl}}/v1/convert/file?to_formats=md&do_ocr=false
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="files"; filename="presentation.pptx"
Content-Type: application/vnd.openxmlformats-officedocument.presentationml.presentation

< ./samples/sample.pptx
------WebKitFormBoundary--

### Convert local PDF to JSON
# @name convertPdfToJson
POST {{baseUrl}}/v1/convert/file?to_formats=json&do_ocr=false
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="files"; filename="document.pdf"
Content-Type: application/pdf

< ./samples/sample.pdf
------WebKitFormBoundary--

###############################################################################
# Async Conversion (for large files)
###############################################################################

### Submit async conversion job
# @name asyncConvert
POST {{baseUrl}}/v1/convert/source/async
Content-Type: application/json

{
  "http_sources": [
    {"url": "https://arxiv.org/pdf/2501.17887"}
  ],
  "options": {
    "to_formats": ["md"],
    "do_ocr": false
  }
}

### Poll task status (replace TASK_ID with actual ID from async response)
GET {{baseUrl}}/v1/status/poll/TASK_ID

### Get task result (replace TASK_ID with actual ID)
GET {{baseUrl}}/v1/result/TASK_ID
